<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        td,
        th {
            width: 80px;
            height: 80px;
            text-align: center;
        }
    </style>
</head>

<body>
    <table border="1" frame="void" bordercolor="black">
        <tr>
            <td id="0" class="side1 vertical1 diagonalR7"></td>
            <td id="8" class="side1 vertical2 diagonalL1 diagonalR6"></td>
            <td id="16" class="side1 vertical3 diagonalL2 diagonalR5"></td>
            <td id="24" class="side1 vertical4 diagonalL3 diagonalR4"></td>
            <td id="32" class="side1 vertical5 diagonalL4 diagonalR3"></td>
            <td id="40" class="side1 vertical6 diagonalL5 diagonalR2"></td>
            <td id="48" class="side1 vertical7 diagonalL6 diagonalR1"></td>
            <td id="56" class="side1 vertical8 diagonalL7"></td>
        </tr>
        <tr>
            <td id="1" class="side2 vertical1 diagonalL1 diagonalR8"></td>
            <td id="9" class="side2 vertical2 diagonalL2 diagonalR7"></td>
            <td id="17" class="side2 vertical3 diagonalL3 diagonalR6"></td>
            <td id="25" class="side2 vertical4 diagonalL4 diagonalR5"></td>
            <td id="33" class="side2 vertical5 diagonalL5 diagonalR4"></td>
            <td id="41" class="side2 vertical6 diagonalL6 diagonalR3"></td>
            <td id="49" class="side2 vertical7 diagonalL7 diagonalR2"></td>
            <td id="57" class="side2 vertical8 diagonalL8 diagonalR1"></td>
        </tr>
        <tr>
            <td id="2" class="side3 vertical1 diagonalL2 diagonalR9"></td>
            <td id="10" class="side3 vertical2 diagonalL3 diagonalR8"></td>
            <td id="18" class="side3 vertical3 diagonalL4 diagonalR7"></td>
            <td id="26" class="side3 vertical4 diagonalL5 diagonalR6"></td>
            <td id="34" class="side3 vertical5 diagonalL6 diagonalR5"></td>
            <td id="42" class="side3 vertical6 diagonalL7 diagonalR4"></td>
            <td id="50" class="side3 vertical7 diagonalL8 diagonalR3"></td>
            <td id="58" class="side3 vertical8 diagonalL9 diagonalR2"></td>
        </tr>
        <tr>
            <td id="3" class="side4 vertical1 diagonalL3 diagonalR10"></td>
            <td id="11" class="side4 vertical2 diagonalL4 diagonalR9"></td>
            <td id="19" class="side4 vertical3 diagonalL5 diagonalR8"></td>
            <td id="27" class="side4 vertical4 diagonalL6 diagonalR7"></td>
            <td id="35" class="side4 vertical5 diagonalL7 diagonalR6"></td>
            <td id="43" class="side4 vertical6 diagonalL8 diagonalR5"></td>
            <td id="51" class="side4 vertical7 diagonalL9 diagonalR4"></td>
            <td id="59" class="side4 vertical8 diagonalL10 diagonalR3"></td>
        </tr>
        <tr>
            <td id="4" class="side5 vertical1 diagonalL4 diagonalR11"></td>
            <td id="12" class="side5 vertical2 diagonalL5 diagonalR10"></td>
            <td id="20" class="side5 vertical3 diagonalL6 diagonalR9"></td>
            <td id="28" class="side5 vertical4 diagonalL7 diagonalR8"></td>
            <td id="36" class="side5 vertical5 diagonalL8 diagonalR7"></td>
            <td id="44" class="side5 vertical6 diagonalL9 diagonalR6"></td>
            <td id="52" class="side5 vertical7 diagonalL10 diagonalR5"></td>
            <td id="60" class="side5 vertical8 diagonalL11 diagonalR4"></td>
        </tr>
        <tr>
            <td id="5" class="side6 vertical1 diagonalL5 diagonalR12"></td>
            <td id="13" class="side6 vertical2 diagonalL6 diagonalR11"></td>
            <td id="21" class="side6 vertical3 diagonalL7 diagonalR10"></td>
            <td id="29" class="side6 vertical4 diagonalL8 diagonalR9"></td>
            <td id="37" class="side6 vertical5 diagonalL9 diagonalR8"></td>
            <td id="45" class="side6 vertical6 diagonalL10 diagonalR7"></td>
            <td id="53" class="side6 vertical7 diagonalL11 diagonalR6"></td>
            <td id="61" class="side6 vertical8 diagonalL12 diagonalR5"></td>
        </tr>
        <tr>
            <td id="6" class="side7 vertical1 diagonalL6 diagonalR13"></td>
            <td id="14" class="side7 vertical2 diagonalL7 diagonalR12"></td>
            <td id="22" class="side7 vertical3 diagonalL8 diagonalR11"></td>
            <td id="30" class="side7 vertical4 diagonalL9 diagonalR10"></td>
            <td id="38" class="side7 vertical5 diagonalL10 diagonalR9"></td>
            <td id="46" class="side7 vertical6 diagonalL11 diagonalR8"></td>
            <td id="54" class="side7 vertical7 diagonalL12 diagonalR7"></td>
            <td id="62" class="side7 vertical8 diagonalL13 diagonalR6"></td>
        </tr>
        <tr>
            <td id="7" class="side8 vertical1 diagonalL7"></td>
            <td id="15" class="side8 vertical2 diagonalL8 diagonalR13"></td>
            <td id="23" class="side8 vertical3 diagonalL9 diagonalR12"></td>
            <td id="31" class="side8 vertical4 diagonalL10 diagonalR11"></td>
            <td id="39" class="side8 vertical5 diagonalL11 diagonalR10"></td>
            <td id="47" class="side8 vertical6 diagonalL12 diagonalR9"></td>
            <td id="55" class="side8 vertical7 diagonalL13 diagonalR8"></td>
            <td id="63" class="side8 vertical8 diagonalR7"></td>
        </tr>
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"
            integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
        <script>
            // $('td').click(function () {
            //     $(this).toggleClass("clicked");
            //     $('.clicked').text("Q");
            // });
            let clickCnt = 0;
            $("td").on("click", function () {
                let getClass = $(this).attr('class').split(" ");
                console.log(getClass);
                if ((getClass.includes("locked")) == false) {
                    if ((getClass.includes("clicked")) == false) {
                        let cnt = getClass.length;
                        // console.log(cnt);
                        while (cnt >= 0) {
                            $("." + getClass[cnt]).css('background-color', 'Yellow');
                            $("." + getClass[cnt]).addClass("locked");
                            $("." + getClass[cnt]).toggleClass("clickCnt" + clickCnt);                        
                            cnt--;
                        }
                        $(this).toggleClass("clicked");
                        $(this).addClass("clickCnt" + clickCnt); 
                        $(this).text("Q");
                        $(this).removeClass("locked");
                        $(this).css("background-color","white");
                        clickCnt++;
                        if(clickCnt == 8){
                            alert("おめ");
                            audioElem = new Audio();
                            audioElem.src = "fanfare.mp3";
                            audioElem.play();
                        }
                    } else {
                        // $(this).toggleClass("clicked");
                        // $(this).text("");
                        // let cnt = getClass.length;
                        // console.log(cnt);
                        // console.log(getClass);
                        // let deleteClass = getClass[cnt-1];
                        // console.log(deleteClass);
                        // clickCnt--;
                        // while (cnt >= 0) {
                        //     $("." + getClass[cnt]).css('background-color', 'white');
                        //     $("." + getClass[cnt]).removeClass("locked");
                        //     $("." + getClass[cnt]).removeClass("" + deleteClass);
                        //     cnt--;
                        // }
                        // console.log(clickCnt);  
                        // let n = clickCnt;
                        // while(n > -1){
                        //     $(".clickCnt" + (n-1)).css("background-color","Yellow");
                        //     $(".clickCnt" + (n-1)).addClass("locked");                            
                        //     n--;                            
                        // }
                        // $(".clicked").removeClass("locked");
                        // $(".clicked").css("background-color","white");
                    }
                }
            });
        </script>
</body>

</html>